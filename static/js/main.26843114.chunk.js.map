{"version":3,"sources":["dom/renderAsReactDom/filters.ts","components/IsolatedStyles.tsx","styles/constants.ts","i18n/i18n.ts","components/QrCode.tsx","utils/formatters.ts","dom/renderAsReactDom/allow.ts","components/HtmlEmailLink.tsx","dom/renderAsReactDom/mapDomToReact.tsx","dom/renderAsReactDom/parseCustomNode.tsx","dom/renderAsReactDom/index.ts","dom/renderAsReactDom/parseStringToDom.ts","components/SignatureTable.tsx","dom/waitForImageLoad.ts","utils/qrCode.ts","components/RenderedSignature.tsx","dom/toast.ts","hooks/useHtmlId.ts","pages/SignatureCreatorForm.tsx","dom/copyHtml.ts","utils/dom.ts","utils/utils.ts","pages/Instructions.tsx","utils/react.ts","Routes.tsx","App.tsx","index.tsx","utils/path.ts"],"names":["v1","IsolatedStyles","this","shadowRoot","node","attachShadow","mode","props","forceUpdate","children","rest","ref","createPortal","Component","colors","fonts","langs","Object","keys","_i18n","i18n","localeAgnostic","QrCode","alt","size","src","height","width","style","verticalAlign","borderRadius","display","toAssetPath","filename","process","allowAny","headings","Array","map","_","n","tag","allowAttributes","allow","v2","HtmlEmailLink","href","text","target","rel","color","fontSize","fontFamily","lineHeight","whiteSpace","mapDomToReact","idx","nodeType","Node","TEXT_NODE","isTextNode","data","ELEMENT_NODE","isHtmlElementNode","customNode","nodeName","toLowerCase","node_","textContent","parseCustomNode","allowed","find","item","toUpperCase","inner","innerHTML","outer","outerHTML","idxOfInner","indexOf","startTag","slice","endTag","length","childNodes","i","El","attributes","name","value","match","validate","renderAsReactDom","str","dom","DOMParser","parseFromString","body","parseStringToDom","SignatureTable","qrCodeSize","qrCodeDataUri","tr","translations","currentLang","lang","altLang","x","direction","borderCollapse","cellPadding","cellSpacing","padding","qrCodeAlt","textAlign","pipe","followUs","snarkdown","borderRight","valign","textTransform","fontWeight","logoFull","filter","Boolean","join","letterSpacing","jobTitle","phone","number","usedForWechat","wechat","colorScheme","email","border","maxWidth","waitForImageLoad","img","Promise","res","rej","onload","onerror","roundRect","ctx","y","w","h","r","beginPath","moveTo","arcTo","closePath","customRoundRect","outerSize","innerSize","paintQrToCanvas","canvas","url","QRCode","toCanvas","margin","err","getQrCode","a","logo","document","createElement","cssText","getContext","innerLogoSize","fillStyle","fill","strokeStyle","lineWidth","stroke","hidden","appendChild","aspectRatio","offset","drawImage","console","error","remove","toDataURL","initialLoadingState","loading","undefined","RenderedSignature","useState","setData","useEffect","info","all","qrCodeUrl","logoCropped","then","companyInfo","replace","officeAddress","privacyNotice","toastStyleInfo","success","icon","failure","none","toast","options","msg","div","classList","add","opacity","transition","setTimeout","inc","generateHtmlId","prefix","init","en","zh","addresses","defaultValues","JSON","parse","localStorage","getItem","SignatureCreatorForm","useForm","register","handleSubmit","getValues","formRef","useRef","updateValidationMessages","useCallback","current","querySelectorAll","input","validationEl","nextElementSibling","contains","validationMessage","validity","valueMissing","patternMismatch","dataset","patternMsg","addressDatalistId","useHtmlId","changeHandler","form","setItem","stringify","_values","values","savedOfficeAddress","blankOutOfficeAddress","e","currentTarget","className","onInput","required","type","pattern","onClick","onFocus","onBlur","list","id","address","defaultChecked","el","selection","getSelection","range","createRange","empty","addRange","selectNode","execCommand","copyHtml","querySelector","renderAnchors","defaultVal","slugs","Proxy","create","get","key","heading","slug","regex","trim","Instructions","callback","html","setHtml","history","useHistory","fetch","link","getAttribute","startsWith","setAttribute","prependPublicUrlToRelativeLinks","addEventListener","preventDefault","window","location","origin","open","push","hash","scrollIntoView","handleLinks","matchedEl","decodeURIComponent","CSS","escape","scrollHashIntoView","parentEl","observer","MutationObserver","m","disconnect","observe","childList","dangerouslySetInnerHTML","__html","Routes","exact","path","App","basename","activeClassName","to","segments","flat","joinPath","ts","Date","Number","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.26843114.chunk.js","sourcesContent":["export const allowAny = () => true as true\n\nexport const oneOf =\n\t<T>(list: T[]) =>\n\t(v: T) =>\n\t\tlist.includes(v)\n\nexport const exact =\n\t<T>(v1: T) =>\n\t(v2: T) =>\n\t\tv1 === v2\n\nexport const matches = (regex: RegExp) => (v: string) => regex.test(v)\n","// @ts-nocheck\n\n// modified from https://gist.github.com/robertgonzales/b1966af8d2a428a8299663b92fb2fe03\n\nimport { Component, HTMLProps } from 'react'\nimport { createPortal } from 'react-dom'\n\nexport class IsolatedStyles extends Component<HTMLProps & ShadowRootInit> {\n\tcomponentDidMount() {\n\t\tthis.shadowRoot = this.node.attachShadow({ mode: this.props.mode })\n\t\tthis.forceUpdate()\n\t}\n\n\trender() {\n\t\tconst { children, ...rest } = this.props\n\t\treturn (\n\t\t\t<div {...rest} ref={(node) => (this.node = node)}>\n\t\t\t\t{this.shadowRoot && createPortal(children, this.shadowRoot)}\n\t\t\t</div>\n\t\t)\n\t}\n}\n","export const colors = {\n\tbrand: '#e06534',\n\tbigText: '#646464',\n\tsmallText: '#646464',\n\tlink: '#646464',\n}\n\nexport const fonts = {\n\tbody: '\"Arial\", \"Microsoft YaHei\", \"微软雅黑\", \"微軟雅黑\", sans-serif',\n}\n","import _i18n from './_i18n.json'\n\nexport type Lang = Exclude<keyof typeof _i18n, '*'>\n\nexport const langs = Object.keys(_i18n) as Lang[]\n\nexport type Translations = typeof _i18n['en']\n\nexport const i18n: Record<Lang, Translations> = _i18n\nexport const localeAgnostic = _i18n['*']\n","import { FC } from 'react'\n\ntype Props = {\n\talt: string\n\tsize: number\n\tsrc: string\n}\n\nexport const QrCode: FC<Props> = ({ alt, size, src }) => (\n\t<img\n\t\talt={alt}\n\t\tsrc={src}\n\t\theight={size}\n\t\twidth={size}\n\t\tstyle={{\n\t\t\twidth: `${size}px`,\n\t\t\tverticalAlign: 'initial',\n\t\t\tborderRadius: 0,\n\t\t\tdisplay: 'block',\n\t\t\theight: `${size}px`,\n\t\t}}\n\t/>\n)\n","import { regex } from 'fancy-regex'\n\nexport const slugify = (str: string) =>\n\tstr\n\t\t.toLowerCase()\n\t\t.replace(\n\t\t\tregex('gu')`[\n\t\t\t\t^\n\t\t\t\t\\p{Letter}\n\t\t\t\t\\p{Mark}\n\t\t\t\t\\p{Number}\n\t\t\t]+`,\n\t\t\t' ',\n\t\t)\n\t\t.trim()\n\t\t.replace(/\\s+/g, '-')\n\nexport const filenameify = (date: Date) =>\n\tdate.toISOString().replace(/:/g, '_').slice(0, 19) + 'Z'\n\nexport const wrapEmailHtml = (html: string) => `<!DOCTYPE html>\n<html lang=\"en\">\n    <head>\n        <meta http-equiv=Content-Type content=\"text/html; charset=utf-8\">\n        <title>Email signature</title>\n    </head>\n    <body>\n\t\t${html}\n    </body>\n</html>`\n\nexport const toAssetPath = (filename: string) =>\n\t`${process.env.PUBLIC_URL}/assets/${filename}`\n\nexport const toContentPath = (filename: string) =>\n\t`${process.env.PUBLIC_URL}/content/${filename}`\n","import { allowAny, exact } from './filters'\n\nexport type Allow = {\n\ttag: string\n\tallowAttributes?: [attr: string, matcher: (input: string) => boolean][]\n}\n\nconst headings: Allow[] = [...new Array(6)].map((_, n) => ({\n\ttag: `h${n + 1}`,\n\tallowAttributes: [['id', allowAny]],\n}))\n\nexport const allow: Allow[] = [\n\t...headings,\n\t{ tag: 'p' },\n\t{ tag: 'ul' },\n\t{ tag: 'ol' },\n\t{ tag: 'li' },\n\t{\n\t\ttag: 'a',\n\t\tallowAttributes: [\n\t\t\t['href', allowAny],\n\t\t\t['target', exact('_blank')],\n\t\t],\n\t},\n\t{ tag: 'br' },\n\t{ tag: 'hr' },\n]\n","import { FC } from 'react'\nimport { colors, fonts } from '../styles/constants'\n\ntype Props = {\n\thref: string\n\ttext: string\n}\n\nexport const HtmlEmailLink: FC<Props> = ({ href, text }) => {\n\treturn (\n\t\t<a\n\t\t\ttarget='_blank'\n\t\t\trel='noreferrer'\n\t\t\tstyle={{\n\t\t\t\tcolor: colors.link,\n\t\t\t\tfontSize: '12px',\n\t\t\t\tfontFamily: fonts.body,\n\t\t\t}}\n\t\t\thref={href}\n\t\t>\n\t\t\t<span\n\t\t\t\tstyle={{\n\t\t\t\t\tlineHeight: '1.2',\n\t\t\t\t\tfontFamily: fonts.body,\n\t\t\t\t\twhiteSpace: 'nowrap',\n\t\t\t\t\tfontSize: '12px',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{text}\n\t\t\t</span>\n\t\t</a>\n\t)\n}\n","import { Fragment } from 'react'\nimport { allow } from './allow'\nimport { parseCustomNode } from './parseCustomNode'\n\nconst isTextNode = (node: Node): node is Text =>\n\tnode.nodeType === Node.TEXT_NODE\n\nconst isHtmlElementNode = (node: Node): node is HTMLElement =>\n\tnode.nodeType === Node.ELEMENT_NODE\n\nexport const mapDomToReact = (node: Node, idx: number) => {\n\tif (isTextNode(node)) {\n\t\treturn <Fragment key={idx}>{node.data}</Fragment>\n\t} else if (isHtmlElementNode(node)) {\n\t\tconst customNode = parseCustomNode(node)\n\n\t\tif (customNode) return customNode\n\n\t\tconst allowed = allow.find(\n\t\t\t(item) => item.tag.toUpperCase() === node.nodeName,\n\t\t)\n\n\t\tif (!allowed) {\n\t\t\tconst inner = node.innerHTML\n\t\t\tconst outer = node.outerHTML\n\n\t\t\tconst idxOfInner = outer.indexOf(inner)\n\n\t\t\tconst startTag = outer.slice(0, idxOfInner)\n\t\t\tconst endTag = outer.slice(idxOfInner + inner.length)\n\n\t\t\treturn (\n\t\t\t\t<Fragment key={idx}>\n\t\t\t\t\t<Fragment key={-1}> {startTag} </Fragment>\n\t\t\t\t\t{[...node.childNodes].map((n, i) => mapDomToReact(n, i))}\n\t\t\t\t\t<Fragment key={node.childNodes.length}> {endTag} </Fragment>\n\t\t\t\t</Fragment>\n\t\t\t)\n\t\t}\n\n\t\tconst El = node.nodeName.toLowerCase()\n\n\t\tconst props: Record<string, string> = {}\n\n\t\tfor (const { name, value } of node.attributes) {\n\t\t\tconst match = allowed.allowAttributes?.find(([key]) => key === name)\n\n\t\t\tif (!match) continue\n\n\t\t\tconst [, validate] = match\n\n\t\t\tif (validate(value)) {\n\t\t\t\tprops[name] = value\n\t\t\t}\n\t\t}\n\n\t\treturn node.textContent ? (\n\t\t\t<El key={idx} {...(props as any)}>\n\t\t\t\t{[...node.childNodes].map((n, i) => mapDomToReact(n, i))}\n\t\t\t</El>\n\t\t) : (\n\t\t\t<El key={idx} {...props} />\n\t\t)\n\t}\n\n\treturn <></>\n}\n","import { HtmlEmailLink } from '../../components/HtmlEmailLink'\n\nexport const parseCustomNode = (node: Node) => {\n\tconst nodeName = node.nodeName.toLowerCase()\n\n\tswitch (nodeName.toLowerCase()) {\n\t\tcase 'a':\n\t\t\tconst node_ = node as HTMLAnchorElement\n\n\t\t\treturn (\n\t\t\t\t<HtmlEmailLink\n\t\t\t\t\thref={node_.href}\n\t\t\t\t\ttext={node.textContent ?? ''}\n\t\t\t\t/>\n\t\t\t)\n\t\tdefault:\n\t\t\treturn null\n\t}\n}\n","import { mapDomToReact } from './mapDomToReact'\nimport { parseStringToDom } from './parseStringToDom'\n\nexport const renderAsReactDom = /* (allowList: Allow[]) => */ (text: string) =>\n\tparseStringToDom(text).map(mapDomToReact)\n","export const parseStringToDom = (str: string) => {\n\tconst dom = new DOMParser().parseFromString(str, 'text/html')\n\n\treturn [...dom.body.childNodes]\n}\n","import { FC } from 'react'\nimport { colors, fonts } from '../styles/constants'\nimport { SignatureInfo } from '../types/signatureInfo'\nimport snarkdown from 'snarkdown'\nimport { QrCode } from './QrCode'\nimport { Translations, langs } from '../i18n/i18n'\nimport { toAssetPath } from '../utils/formatters'\nimport { pipe } from 'fp-ts/lib/function'\nimport { renderAsReactDom } from '../dom/renderAsReactDom'\nimport { HtmlEmailLink } from './HtmlEmailLink'\n\ntype Props = {\n  translations: Translations\n  qrCodeSize: number\n  qrCodeDataUri: string\n} & SignatureInfo\n\nexport const SignatureTable: FC<Props> = ({ qrCodeSize, qrCodeDataUri, translations: tr, ...props }) => {\n  const currentLang = props.lang\n  const altLang = langs.find((x) => x !== currentLang)!\n\n  return (\n    <table style={{ direction: 'ltr', borderCollapse: 'collapse' }}>\n      <tbody>\n        <tr>\n          <td>\n            <table\n              cellPadding={0}\n              cellSpacing={0}\n              style={{\n                borderCollapse: 'collapse',\n                fontFamily: fonts.body,\n                lineHeight: '1.15',\n                color: '#000',\n              }}\n            >\n              <tbody>\n                <tr>\n                  <td\n                    style={{\n                      verticalAlign: 'top',\n                      padding: '0.01px 14px 0.01px 0.01px',\n                    }}\n                  >\n                    <table\n                      cellPadding={0}\n                      cellSpacing={0}\n                      style={{\n                        borderCollapse: 'collapse',\n                        width: qrCodeSize,\n                      }}\n                    >\n                      <tbody>\n                        <tr>\n                          <td\n                            style={{\n                              padding: '0.01px',\n                            }}\n                          >\n                            <QrCode alt={tr.qrCodeAlt} src={qrCodeDataUri} size={qrCodeSize} />\n                          </td>\n                        </tr>\n                        <tr>\n                          <td\n                            style={{\n                              borderCollapse: 'collapse',\n                              fontFamily: fonts.body,\n                              lineHeight: '1.15',\n                              color: colors.brand,\n                              padding: '6px 0.01px 0.01px 0.01px',\n                              fontSize: '15.6px',\n                              textAlign: 'center',\n                            }}\n                          >\n                            {pipe(tr.followUs, snarkdown, renderAsReactDom)}\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </td>\n                  <td\n                    height={1}\n                    width={0}\n                    style={{\n                      width: '0px',\n                      padding: '0.01px',\n                      borderRight: `2px solid ${colors.brand}`,\n                      height: '1px',\n                      fontSize: '1pt',\n                    }}\n                  >\n                    &nbsp;\n                  </td>\n                  <td\n                    style={{\n                      padding: '0.01px 14px 0.01px 14px',\n                      verticalAlign: 'top',\n                    }}\n                    valign='top'\n                  >\n                    <table\n                      cellPadding={0}\n                      cellSpacing={0}\n                      style={{\n                        borderCollapse: 'collapse',\n                      }}\n                    >\n                      <tbody>\n                        <tr>\n                          <td\n                            style={{\n                              lineHeight: '1.2',\n                              padding: '0.01px 0.01px 10px 0.01px',\n                            }}\n                          >\n                            <span\n                              style={{\n                                fontFamily: fonts.body,\n                                textTransform: 'initial',\n                                fontWeight: 'bold',\n                              }}\n                            >\n                              <span\n                                style={{\n                                  fontSize: '15.6px',\n                                }}\n                              >\n                                <img width={150} src={toAssetPath(tr.logoFull)} alt='' />\n                              </span>\n                            </span>\n                          </td>\n                        </tr>\n\n                        <tr>\n                          <td\n                            style={{\n                              lineHeight: '1.2',\n                              padding: '0.01px 0.01px 12px 0.01px',\n                            }}\n                          >\n                            <span\n                              style={{\n                                fontFamily: fonts.body,\n                                textTransform: 'initial',\n                                fontWeight: 'bold',\n                              }}\n                            >\n                              <span\n                                style={{\n                                  color: colors.bigText,\n                                  fontSize: '15.6px',\n                                }}\n                              >\n                                {[\n                                  props.name[currentLang],\n                                  props.name[altLang],\n                                ].filter(Boolean).join(' ')}\n                              </span>\n                            </span>\n                            <br />\n                            <span\n                              style={{\n                                fontSize: '13.2px',\n                                letterSpacing: '0px',\n                                fontFamily: fonts.body,\n                                textTransform: 'initial',\n                                fontWeight: 'bold',\n                                color: colors.bigText,\n                              }}\n                            >\n                              {props.jobTitle}\n                            </span>\n                          </td>\n                        </tr>\n                        <tr>\n                          <td\n                            style={{\n                              padding: '0.01px',\n                              lineHeight: 0,\n                            }}\n                          >\n                            <table\n                              cellPadding={0}\n                              cellSpacing={0}\n                              style={{\n                                borderCollapse: 'collapse',\n                              }}\n                            >\n                              <tbody>\n                                <tr>\n                                  <td\n                                    style={{\n                                      padding: '0.01px',\n                                    }}\n                                  >\n                                    <table\n                                      cellPadding={0}\n                                      cellSpacing={0}\n                                      style={{\n                                        borderCollapse: 'collapse',\n                                      }}\n                                    >\n                                      <tbody>\n                                        <tr>\n                                          <td\n                                            style={{\n                                              lineHeight: '0%',\n                                              padding: '0.01px 0.01px 6px 0.01px',\n                                            }}\n                                          >\n                                            <table\n                                              cellPadding={0}\n                                              cellSpacing={0}\n                                              style={{\n                                                borderCollapse: 'collapse',\n                                                lineHeight: '14px',\n                                                fontSize: '12px',\n                                                fontFamily: fonts.body,\n                                              }}\n                                            >\n                                              <tbody>\n                                                <tr>\n                                                  <td\n                                                    style={{\n                                                      padding: '0.01px',\n                                                      fontFamily: fonts.body,\n                                                      fontSize: '12px',\n                                                      color: colors.smallText,\n                                                    }}\n                                                  >\n                                                    <HtmlEmailLink\n                                                      href={`tel:${props.phone.number}`}\n                                                      text={props.phone.number}\n                                                    />\n                                                    {props.phone.usedForWechat ? ` ${tr.wechat}` : null}\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </td>\n                                          <td\n                                            style={{\n                                              lineHeight: '0%',\n                                              padding: '0.01px 0.01px 6px 0.01px',\n                                            }}\n                                          ></td>\n                                        </tr>\n                                      </tbody>\n                                    </table>\n                                  </td>\n                                </tr>\n                                <tr>\n                                  <td\n                                    style={{\n                                      padding: '0.01px',\n                                    }}\n                                  >\n                                    <table\n                                      cellPadding={0}\n                                      cellSpacing={0}\n                                      style={{\n                                        borderCollapse: 'collapse',\n                                      }}\n                                    >\n                                      <tbody>\n                                        <tr>\n                                          <td\n                                            style={{\n                                              lineHeight: '0%',\n                                              padding: '0.01px 0.01px 6px 0.01px',\n                                            }}\n                                          >\n                                            <table\n                                              cellPadding={0}\n                                              cellSpacing={0}\n                                              style={{\n                                                borderCollapse: 'collapse',\n                                                lineHeight: '14px',\n                                                fontSize: '12px',\n                                                fontFamily: fonts.body,\n                                              }}\n                                            >\n                                              <tbody>\n                                                <tr>\n                                                  <td\n                                                    style={{\n                                                      padding: '0.01px',\n                                                      colorScheme: 'light only',\n                                                      fontFamily: fonts.body,\n                                                      fontSize: '12px',\n                                                    }}\n                                                  >\n                                                    <HtmlEmailLink\n                                                      href={`mailto:${props.email}`}\n                                                      text={props.email}\n                                                    />\n                                                  </td>\n                                                </tr>\n                                              </tbody>\n                                            </table>\n                                          </td>\n                                        </tr>\n                                      </tbody>\n                                    </table>\n                                  </td>\n                                </tr>\n                              </tbody>\n                            </table>\n                          </td>\n                        </tr>\n                      </tbody>\n                    </table>\n                  </td>\n                </tr>\n              </tbody>\n            </table>\n            <table\n              cellPadding={0}\n              cellSpacing={0}\n              /* @ts-ignore */\n              border={0}\n              style={{ maxWidth: '600px', width: '100%' }}\n            >\n              <tbody>\n                <tr>\n                  <td style={{ lineHeight: 0 }} />\n                </tr>\n              </tbody>\n            </table>\n          </td>\n        </tr>\n      </tbody>\n    </table>\n  )\n}\n","export const waitForImageLoad = (img: HTMLImageElement) =>\n\tnew Promise((res, rej) => {\n\t\timg.onload = res\n\t\timg.onerror = rej\n\t})\n","import QRCode from 'qrcode'\nimport { waitForImageLoad } from '../dom/waitForImageLoad'\nimport { colors } from '../styles/constants'\n\ntype Rect = [x: number, y: number, width: number, height: number]\n\n// https://stackoverflow.com/a/7838871\n\nconst roundRect = (\n\tctx: CanvasRenderingContext2D,\n\tx: number,\n\ty: number,\n\tw: number,\n\th: number,\n\tr: number,\n) => {\n\tif (w < 2 * r) r = w / 2\n\tif (h < 2 * r) r = h / 2\n\n\tctx.beginPath()\n\tctx.moveTo(x + r, y)\n\tctx.arcTo(x + w, y, x + w, y + h, r)\n\tctx.arcTo(x + w, y + h, x, y + h, r)\n\tctx.arcTo(x, y + h, x, y, r)\n\tctx.arcTo(x, y, x + w, y, r)\n\tctx.closePath()\n}\n\nconst customRoundRect = (\n\tctx: CanvasRenderingContext2D,\n\touterSize: number,\n\tinnerSize: number,\n) => {\n\tconst rect: Rect = [\n\t\touterSize / 2 - innerSize / 2,\n\t\touterSize / 2 - innerSize / 2,\n\t\tinnerSize,\n\t\tinnerSize,\n\t]\n\n\troundRect(ctx, ...rect, innerSize / 8)\n}\n\ntype QrCodeInit = {\n\tsize: number\n\turl: string\n\tlogo: string\n}\n\nconst paintQrToCanvas = (\n\tcanvas: HTMLCanvasElement,\n\turl: string,\n\tsize: number,\n) =>\n\tnew Promise<void>((res, rej) => {\n\t\tQRCode.toCanvas(canvas, url, { margin: 2, width: size }, (err) => {\n\t\t\tif (err) {\n\t\t\t\trej(err)\n\t\t\t} else {\n\t\t\t\tres()\n\t\t\t}\n\t\t})\n\t})\n\nexport const getQrCode = async ({ size, url, logo }: QrCodeInit) => {\n\tconst canvas = document.createElement('canvas')\n\n\tcanvas.width = size\n\tcanvas.height = size\n\n\tcanvas.style.cssText = `width: ${size}px; height: ${size}px`\n\n\tawait paintQrToCanvas(canvas, url, size)\n\n\tconst ctx = canvas.getContext('2d')!\n\n\tconst qrCodeSize = size\n\tconst outerLogoSize = size / 3.5\n\tconst innerLogoSize = size / 4\n\n\tcustomRoundRect(ctx, qrCodeSize, outerLogoSize)\n\tctx.fillStyle = '#ffffff'\n\tctx.fill()\n\n\tcustomRoundRect(ctx, qrCodeSize, innerLogoSize)\n\tctx.strokeStyle = colors.brand\n\tctx.lineWidth = 0.5\n\tctx.stroke()\n\n\tconst img = document.createElement('img')\n\timg.hidden = true\n\tdocument.body.appendChild(img)\n\timg.src = logo\n\n\ttry {\n\t\tawait waitForImageLoad(img)\n\n\t\tconst aspectRatio = img.width / img.height\n\n\t\tconst offset = qrCodeSize / 2 - innerLogoSize / 2\n\n\t\tctx.drawImage(\n\t\t\timg,\n\t\t\toffset + aspectRatio,\n\t\t\toffset,\n\t\t\tinnerLogoSize * aspectRatio,\n\t\t\tinnerLogoSize,\n\t\t)\n\t} catch (e) {\n\t\tconsole.error(e)\n\t}\n\n\timg.remove()\n\n\treturn canvas.toDataURL()\n}\n","import { FC, useEffect, useState } from 'react'\nimport { colors, fonts } from '../styles/constants'\nimport { SignatureInfo } from '../types/signatureInfo'\nimport snarkdown from 'snarkdown'\nimport { i18n } from '../i18n/i18n'\nimport { SignatureTable } from './SignatureTable'\nimport { getQrCode } from '../utils/qrCode'\nimport { toAssetPath } from '../utils/formatters'\nimport { waitForImageLoad } from '../dom/waitForImageLoad'\nimport { pipe } from 'fp-ts/lib/function'\nimport { renderAsReactDom } from '../dom/renderAsReactDom'\n\ntype LoadingState =\n\t| {\n\t\t\tloading: false\n\t\t\tqrCodeDataUri: string\n\t  }\n\t| {\n\t\t\tloading: true\n\t\t\tqrCodeDataUri?: undefined\n\t  }\n\nconst initialLoadingState = {\n\tloading: true,\n\tqrCodeDataUri: undefined,\n} as LoadingState\n\nexport const RenderedSignature: FC<SignatureInfo & { qrCodeSize: number }> = (\n\tprops,\n) => {\n\tconst [data, setData] = useState(initialLoadingState)\n\n\tconst currentLang = props.lang\n\n\tconst tr = i18n[currentLang]\n\n\tuseEffect(() => {\n\t\tsetData(initialLoadingState)\n\t\tconsole.info('Loading QR code...')\n\n\t\tconst img = document.createElement('img')\n\t\timg.src = toAssetPath(tr.logoFull)\n\n\t\tPromise.all([\n\t\t\tgetQrCode({\n\t\t\t\tsize: props.qrCodeSize,\n\t\t\t\turl: tr.qrCodeUrl,\n\t\t\t\tlogo: toAssetPath(tr.logoCropped),\n\t\t\t}),\n\t\t\twaitForImageLoad(img),\n\t\t]).then(async ([qrCodeDataUri]) => {\n\t\t\tsetData({\n\t\t\t\tloading: false,\n\t\t\t\tqrCodeDataUri,\n\t\t\t})\n\t\t})\n\t}, [props.qrCodeSize, tr.logoCropped, tr.qrCodeUrl, tr.logoFull])\n\n\treturn data.loading ? (\n\t\t<>Loading...</>\n\t) : (\n\t\t<div style={{ fontFamily: fonts.body, color: colors.smallText }}>\n\t\t\t<div>\n\t\t\t\t<SignatureTable\n\t\t\t\t\t{...{\n\t\t\t\t\t\t...props,\n\t\t\t\t\t\tqrCodeSize: props.qrCodeSize,\n\t\t\t\t\t\tqrCodeDataUri: data.qrCodeDataUri,\n\t\t\t\t\t}}\n\t\t\t\t\ttranslations={tr}\n\t\t\t\t/>\n\t\t\t</div>\n\t\t\t<p\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily: fonts.body,\n\t\t\t\t\tlineHeight: 1.6,\n\t\t\t\t\tmargin: '12px 0.01px 0.01px 0.01px',\n\t\t\t\t\tcolor: colors.smallText,\n\t\t\t\t\tfontSize: 12,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{pipe(\n\t\t\t\t\ttr.companyInfo.replace(\n\t\t\t\t\t\t'{officeAddress}',\n\t\t\t\t\t\tprops.officeAddress,\n\t\t\t\t\t),\n\t\t\t\t\tsnarkdown,\n\t\t\t\t\trenderAsReactDom,\n\t\t\t\t)}\n\t\t\t</p>\n\t\t\t<p\n\t\t\t\tstyle={{\n\t\t\t\t\tfontFamily: fonts.body,\n\t\t\t\t\tlineHeight: 1.6,\n\t\t\t\t\tmargin: '12px 0.01px 0.01px 0.01px',\n\t\t\t\t\tcolor: colors.smallText,\n\t\t\t\t\tfontSize: 12,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{pipe(tr.privacyNotice, snarkdown, renderAsReactDom)}\n\t\t\t</p>\n\t\t</div>\n\t)\n}\n","type ToastStyle = 'success' | 'failure' | 'none'\n\ntype ToastOptions = {\n\tstyle: ToastStyle\n}\n\nconst toastStyleInfo: Record<ToastStyle, { icon: string }> = {\n\tsuccess: { icon: '✅' },\n\tfailure: { icon: '❌' },\n\tnone: { icon: '' },\n}\n\nexport const toast =\n\t(options: ToastOptions = { style: 'none' }) =>\n\t(msg: string) => {\n\t\tconst div = document.createElement('div')\n\t\tdiv.classList.add('toast')\n\t\tdiv.style.opacity = '0'\n\t\tdiv.style.transition = 'opacity 0.6s'\n\n\t\tdiv.textContent = [toastStyleInfo[options.style].icon, msg]\n\t\t\t.filter(Boolean)\n\t\t\t.join(' ')\n\n\t\tdocument.body.appendChild(div)\n\n\t\tsetTimeout(() => {\n\t\t\tdiv.style.opacity = '1'\n\t\t}, 10)\n\n\t\tsetTimeout(() => {\n\t\t\tdiv.style.transition = 'opacity 1s'\n\t\t}, 200)\n\n\t\tsetTimeout(() => {\n\t\t\tdiv.style.opacity = '0'\n\t\t}, 1200)\n\n\t\tsetTimeout(() => {\n\t\t\tdiv.remove()\n\t\t}, 2000)\n\t}\n","import { useState } from 'react'\n\nlet inc = 0\n\nconst generateHtmlId = (prefix = 'id') => `${prefix}-${++inc}`\n\nexport const useHtmlId = (prefix = 'id') => {\n\tconst [htmlId /* , setHtmlId */] = useState(generateHtmlId(prefix))\n\n\treturn htmlId\n}\n","import React, { FC, useCallback, useEffect, useRef } from 'react'\nimport { useForm } from 'react-hook-form'\nimport { IsolatedStyles } from '../components/IsolatedStyles'\nimport { RenderedSignature } from '../components/RenderedSignature'\nimport { copyHtml } from '../dom/copyHtml'\nimport { useHtmlId } from '../hooks/useHtmlId'\nimport { localeAgnostic } from '../i18n/i18n'\nimport { SignatureInfo } from '../types/signatureInfo'\n\nconst qrCodeSize = 120\n\nconst init: SignatureInfo = {\n\tlang: 'en',\n\tname: {\n\t\ten: 'Jane Doe',\n\t\tzh: '杜娟',\n\t},\n\tjobTitle: 'Senior Data Wrangler',\n\tphone: { number: '+86 138 8888 8888', usedForWechat: false },\n\temail: 'jane.doe@clearlyloc.com',\n\tofficeAddress: localeAgnostic.addresses[0].value,\n}\n\nconst defaultValues: SignatureInfo =\n\tJSON.parse(localStorage.getItem('signatureCreator') ?? 'null') ?? init\n\nexport const SignatureCreatorForm: FC = () => {\n\tconst { register, handleSubmit, getValues } = useForm<SignatureInfo>({\n\t\tdefaultValues,\n\t})\n\n\tconst formRef = useRef<HTMLFormElement>(null)\n\n\tconst updateValidationMessages = useCallback(() => {\n\t\tfor (const input of formRef.current?.querySelectorAll('input') ?? []) {\n\t\t\tconst validationEl = input.nextElementSibling\n\n\t\t\tif (\n\t\t\t\tvalidationEl &&\n\t\t\t\tvalidationEl.classList.contains('validation-msg')\n\t\t\t) {\n\t\t\t\tlet { validationMessage, validity } = input\n\n\t\t\t\tif (!validity.valueMissing && validity.patternMismatch) {\n\t\t\t\t\tvalidationMessage =\n\t\t\t\t\t\tinput.dataset.patternMsg ?? validationMessage\n\t\t\t\t}\n\n\t\t\t\tvalidationEl.textContent = validationMessage\n\t\t\t}\n\t\t}\n\t}, [])\n\n\tconst addressDatalistId = useHtmlId(`address-list`)\n\n\tuseEffect(() => {\n\t\t// once on load\n\t\tupdateValidationMessages()\n\t}, [updateValidationMessages])\n\n\tconst changeHandler = useCallback(\n\t\t(form: SignatureInfo) => {\n\t\t\tlocalStorage.setItem('signatureCreator', JSON.stringify(form))\n\n\t\t\tupdateValidationMessages()\n\t\t},\n\t\t[updateValidationMessages],\n\t)\n\n\tconst _values = getValues()\n\n\tconst values = _values?.name ? _values : defaultValues\n\n\tconst savedOfficeAddress = useRef(values.officeAddress)\n\n\tconst blankOutOfficeAddress = (\n\t\te:\n\t\t\t| React.FocusEvent<HTMLInputElement>\n\t\t\t| React.MouseEvent<HTMLInputElement>,\n\t) => {\n\t\tsavedOfficeAddress.current = values.officeAddress\n\n\t\te.currentTarget.value = ''\n\t}\n\n\tconst revertOfficeAddress = (e: React.FocusEvent<HTMLInputElement>) => {\n\t\te.currentTarget.value =\n\t\t\te.currentTarget.value || savedOfficeAddress.current\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t<h1>Email signature</h1>\n\n\t\t\t<div className='row'>\n\t\t\t\t<form\n\t\t\t\t\tclassName='col'\n\t\t\t\t\tref={formRef}\n\t\t\t\t\tonInput={handleSubmit(changeHandler)}\n\t\t\t\t>\n\t\t\t\t\t<div className='magic-flex'>\n\t\t\t\t\t\t<div className='spaced col-first'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tEnglish name\n\t\t\t\t\t\t\t\t<input required name='name.en' ref={register} />\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced col-last'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tChinese name (optional)\n\t\t\t\t\t\t\t\t<input name='name.zh' ref={register} />\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tJob title\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\tname='jobTitle'\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tWork email\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\t\t\t\tname='email'\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\tpattern='.+@clearlyloc.com'\n\t\t\t\t\t\t\t\t\tdata-pattern-msg='Must end with @clearlyloc.com'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tPhone number (including country code)\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\ttype='tel'\n\t\t\t\t\t\t\t\t\tname='phone.number'\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\tpattern='\\+[\\d ]+'\n\t\t\t\t\t\t\t\t\tdata-pattern-msg='Must start with a country code in the format +XX (e.g. +86 for China) and contain only numbers and spaces'\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<label className='secondary-field'>\n\t\t\t\t\t\t\t\tUsed for WeChat?\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\ttype='checkbox'\n\t\t\t\t\t\t\t\t\tname='phone.usedForWechat'\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\tOffice address\n\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\tonClick={blankOutOfficeAddress}\n\t\t\t\t\t\t\t\t\tonFocus={blankOutOfficeAddress}\n\t\t\t\t\t\t\t\t\tonBlur={revertOfficeAddress}\n\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\ttype='text'\n\t\t\t\t\t\t\t\t\tname='officeAddress'\n\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\tlist={addressDatalistId}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t<div className='validation-msg'></div>\n\t\t\t\t\t\t\t</label>\n\n\t\t\t\t\t\t\t<datalist id={addressDatalistId}>\n\t\t\t\t\t\t\t\t{localeAgnostic.addresses.map(\n\t\t\t\t\t\t\t\t\t(address, idx) => (\n\t\t\t\t\t\t\t\t\t\t<option key={idx} value={address.value}>\n\t\t\t\t\t\t\t\t\t\t\t{address.name}\n\t\t\t\t\t\t\t\t\t\t</option>\n\t\t\t\t\t\t\t\t\t),\n\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t</datalist>\n\t\t\t\t\t\t</div>\n\n\t\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t\t<fieldset>\n\t\t\t\t\t\t\t\t<legend>Signature language</legend>\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\tEnglish\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\ttype='radio'\n\t\t\t\t\t\t\t\t\t\tname='lang'\n\t\t\t\t\t\t\t\t\t\tvalue='en'\n\t\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\t\tdefaultChecked\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</label>{' '}\n\t\t\t\t\t\t\t\t<label>\n\t\t\t\t\t\t\t\t\tChinese\n\t\t\t\t\t\t\t\t\t<input\n\t\t\t\t\t\t\t\t\t\trequired\n\t\t\t\t\t\t\t\t\t\ttype='radio'\n\t\t\t\t\t\t\t\t\t\tname='lang'\n\t\t\t\t\t\t\t\t\t\tvalue='zh'\n\t\t\t\t\t\t\t\t\t\tref={register}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t</label>\n\t\t\t\t\t\t\t</fieldset>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</div>\n\t\t\t\t</form>\n\n\t\t\t\t<div className='col'>\n\t\t\t\t\t<div className='spaced'>\n\t\t\t\t\t\t<output>\n\t\t\t\t\t\t\t<IsolatedStyles\n\t\t\t\t\t\t\t\tid='rendered-signature-container'\n\t\t\t\t\t\t\t\tmode='open'\n\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t<RenderedSignature\n\t\t\t\t\t\t\t\t\t{...{ ...values, qrCodeSize }}\n\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t</IsolatedStyles>\n\t\t\t\t\t\t</output>\n\t\t\t\t\t</div>\n\n\t\t\t\t\t<button\n\t\t\t\t\t\tonClick={() =>\n\t\t\t\t\t\t\tcopyHtml(\n\t\t\t\t\t\t\t\tdocument\n\t\t\t\t\t\t\t\t\t.querySelector(\n\t\t\t\t\t\t\t\t\t\t'#rendered-signature-container',\n\t\t\t\t\t\t\t\t\t)!\n\t\t\t\t\t\t\t\t\t.shadowRoot?.querySelector('*')!,\n\t\t\t\t\t\t\t)\n\t\t\t\t\t\t}\n\t\t\t\t\t\tclassName='button primary'\n\t\t\t\t\t\ttype='button'\n\t\t\t\t\t>\n\t\t\t\t\t\tCopy\n\t\t\t\t\t</button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</>\n\t)\n}\n","import { toast } from './toast'\n\nexport const copyHtml = (el: HTMLElement) => {\n\tconst selection = document.getSelection()\n\tconst range = document.createRange()\n\n\tselection?.empty()\n\tselection?.addRange(range)\n\n\trange.selectNode(el)\n\n\tconst succeeded = document.execCommand('copy')\n\n\tif (succeeded) {\n\t\ttoast({ style: 'success' })('Copied')\n\t} else {\n\t\ttoast({ style: 'failure' })('Failed to copy')\n\t}\n\n\tselection?.empty()\n}\n","import { useHistory } from 'react-router-dom'\nimport { pipe } from 'fp-ts/function'\nimport { slugify } from './formatters'\nimport { hashWithDefault } from './utils'\n\nexport const renderAnchors = (el: HTMLElement) => {\n\tconst slugs = hashWithDefault(0)\n\n\tfor (const heading of el.querySelectorAll(\n\t\t'h2, h3, h4, h5, h6, .anchored',\n\t)) {\n\t\tif (heading.textContent) {\n\t\t\tconst slug = slugify(heading.textContent) || 'heading'\n\n\t\t\tconst x = ++slugs[slug]\n\n\t\t\theading.id = [slug, x > 1 && x].filter(Boolean).join('-')\n\t\t\theading.classList.add('anchored')\n\t\t}\n\t}\n}\n\nexport const prependPublicUrlToRelativeLinks = (el: HTMLElement) => {\n\tfor (const link of el.querySelectorAll('a')) {\n\t\tconst href = link.getAttribute('href')\n\n\t\tif (href?.startsWith('/')) {\n\t\t\tlink.setAttribute('href', process.env.PUBLIC_URL + href)\n\t\t}\n\t}\n}\n\nexport const handleLinks = (\n\tel: HTMLElement,\n\thistory: ReturnType<typeof useHistory>,\n) => {\n\tel.addEventListener('click', (e) => {\n\t\tconst target = e.target as HTMLAnchorElement\n\t\tconst href = target.getAttribute('href')\n\n\t\tif (target.nodeName === 'A' && href) {\n\t\t\te.preventDefault()\n\n\t\t\tif (\n\t\t\t\thref.startsWith('http') &&\n\t\t\t\t!href.startsWith(window.location.origin)\n\t\t\t) {\n\t\t\t\twindow.open(href, '_blank', 'noopener noreferrer')\n\t\t\t} else {\n\t\t\t\thistory.push(href.slice(process.env.PUBLIC_URL.length))\n\t\t\t}\n\t\t} else if (target.classList.contains('anchored')) {\n\t\t\twindow.location.hash = target.id\n\t\t\ttarget.scrollIntoView(true)\n\t\t}\n\t})\n}\n\nexport const scrollHashIntoView = (el: HTMLElement) => {\n\tif (window.location.hash) {\n\t\tsetTimeout(() => {\n\t\t\tconst matchedEl = pipe(\n\t\t\t\twindow.location.hash.slice(1),\n\t\t\t\tdecodeURIComponent,\n\t\t\t\tCSS.escape,\n\t\t\t\t(id) => el.querySelector(`#${id}`),\n\t\t\t)\n\n\t\t\tmatchedEl?.scrollIntoView(true)\n\t\t\t// 100ms to counteract browser position retaining\n\t\t}, 100)\n\t}\n}\n\nexport const htmlToFragment = (html: string) => {\n\tconst temp = document.createElement('template')\n\ttemp.innerHTML = html\n\n\treturn temp.content\n}\n","export const hashWithDefault = <T>(defaultVal: T) =>\n\tnew Proxy(Object.create(null) as Record<string, T>, {\n\t\tget(target, key: string) {\n\t\t\treturn key in target ? target[key] : defaultVal\n\t\t},\n\t})\n","import { pipe } from 'fp-ts/lib/function'\nimport { FC, useEffect, useState } from 'react'\nimport { useHistory } from 'react-router-dom'\nimport snarkdown from 'snarkdown'\nimport { renderAsReactDom } from '../dom/renderAsReactDom'\nimport {\n\thandleLinks,\n\tprependPublicUrlToRelativeLinks,\n\trenderAnchors,\n\tscrollHashIntoView,\n} from '../utils/dom'\nimport { toContentPath } from '../utils/formatters'\nimport { onHtmlRender } from '../utils/react'\n\nexport const Instructions: FC = () => {\n\tconst [html, setHtml] = useState('')\n\n\tconst history = useHistory()\n\n\tuseEffect(() => {\n\t\tfetch(toContentPath('instructions.html')).then(async (res) => {\n\t\t\tconst html = await res.text()\n\n\t\t\tsetHtml(html)\n\t\t})\n\t}, [])\n\n\treturn (\n\t\t<div\n\t\t\tref={onHtmlRender((el) => {\n\t\t\t\t// setup\n\t\t\t\trenderAnchors(el)\n\t\t\t\tprependPublicUrlToRelativeLinks(el)\n\t\t\t\thandleLinks(el, history)\n\n\t\t\t\t// effects\n\t\t\t\tscrollHashIntoView(el)\n\t\t\t})}\n\t\t\tdangerouslySetInnerHTML={{ __html: html }}\n\t\t></div>\n\t)\n}\n","export const onHtmlRender =\n\t(callback: (parentEl: HTMLElement) => void) =>\n\t(parentEl: HTMLElement | null) => {\n\t\tif (!parentEl) return\n\n\t\tconst observer = new MutationObserver((m) => {\n\t\t\tcallback(parentEl)\n\n\t\t\tobserver.disconnect()\n\t\t})\n\n\t\tobserver.observe(parentEl, { childList: true })\n\t}\n","import { FC } from 'react'\nimport { SignatureCreatorForm } from './pages/SignatureCreatorForm'\nimport { Switch, Route } from 'react-router-dom'\nimport { Instructions } from './pages/Instructions'\n\nexport const Routes: FC = () => {\n\treturn (\n\t\t<Switch>\n\t\t\t<Route exact path='/'>\n\t\t\t\t<SignatureCreatorForm />\n\t\t\t</Route>\n\t\t\t<Route path='/instructions'>\n\t\t\t\t<Instructions />\n\t\t\t</Route>\n\t\t</Switch>\n\t)\n}\n","import { FC, StrictMode } from 'react'\nimport { BrowserRouter as Router, NavLink } from 'react-router-dom'\nimport { Routes } from './Routes'\n\nexport const App: FC = () => {\n\treturn (\n\t\t<>\n\t\t\t<StrictMode>\n\t\t\t\t<Router basename={process.env.PUBLIC_URL}>\n\t\t\t\t\t<nav className='tabs'>\n\t\t\t\t\t\t<NavLink exact activeClassName='active' to='/'>\n\t\t\t\t\t\t\tEmail signature\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t\t<NavLink activeClassName='active' to='/instructions'>\n\t\t\t\t\t\t\tInstructions\n\t\t\t\t\t\t</NavLink>\n\t\t\t\t\t</nav>\n\t\t\t\t\t<main className='container'>\n\t\t\t\t\t\t<Routes />\n\t\t\t\t\t</main>\n\t\t\t\t</Router>\n\t\t\t</StrictMode>\n\t\t</>\n\t)\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport 'chota/dist/chota.css' // can't use .min.css due to CRA transpiling bug\nimport './styles/index.css'\nimport { App } from './App'\nimport { joinPath } from './utils/path'\n\nfetch(joinPath('build-timestamp.txt')).then(async (res) => {\n\tconst ts = await res.text()\n\n\tconsole.info('App last built', new Date(Number(ts)))\n})\n\nReactDOM.render(\n\t<React.StrictMode>\n\t\t<App />\n\t</React.StrictMode>,\n\tdocument.getElementById('root'),\n)\n","import { join } from 'path'\n\nexport const joinPath = (...segments: string[]) =>\n\tjoin(process.env.PUBLIC_URL, ...segments.flat())\n"],"sourceRoot":""}